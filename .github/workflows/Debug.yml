#=================================================  
# https://github.com/P3TERX/Actions-OpenWrt  
# 描述: 使用 GitHub Actions 构建 OpenWrt  
# 许可证: MIT  
# 作者: P3TERX  
# 博客: https://p3terx.com  
#=================================================  

name: Debug  

on:   
  workflow_dispatch:  
  # schedule:  
  #   - cron: "5 23 1/2 * *"  

permissions:  
  contents: read  

env:  
  REPO_TOKEN: ${{ secrets.REPO_TOKEN }}  
  SCKEY: ${{ secrets.SCKEY }}  
  PAT: ${{ secrets.PAT }}  
  TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}  
  TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}  
  TZ: Asia/Shanghai  

jobs:  
  build_openwrt:  
    if: github.event.repository.owner.id == github.event.sender.id || !github.event.sender.id  
    runs-on: ubuntu-latest  
    
    name: Debug测试   
    strategy:  
      fail-fast: false  
    
    steps:  
      - name: 检出代码  
        uses: actions/checkout@v2  # Updated to a stable version  
        with:  
          fetch-depth: 0  

      - name: 定义环境  
        if: always()  
        run: echo "LOG=true" >> $GITHUB_ENV  

      - name: 消息通知  
        if: always()  
        run: |  
          curl -X POST "https://sc.ftqq.com/${{ secrets.SCKEY }}.send" \
          -H "Content-Type: application/json" \
          -d '{  
              "text": "折叠消息示例",  
              "desp": "<details><summary>点击展开</summary>这里是折叠的内容。当你点击上面的链接时，这些文本会显示出来。</details>"  
          }'

